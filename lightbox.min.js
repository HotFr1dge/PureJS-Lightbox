const LIGHTBOXES=[...document.querySelectorAll("._lightbox_gallery_")],OVERLAY=document.createElement("div");createOverlay();const CLOSE_BTN=OVERLAY.querySelector("#_lightbox_gallery_overlay__close_"),PREV_BTN=OVERLAY.querySelector("#_lightbox_gallery_overlay__left"),NEXT_BTN=OVERLAY.querySelector("#_lightbox_gallery_overlay__right");let currentImage,nextImage,prevImage;function hideOverlay(){OVERLAY.classList.add("__transparent__"),setTimeout(()=>{OVERLAY.classList.add("__hidden__")},500),document.body.style.overflow="auto",[...document.getElementsByTagName("img")].forEach(e=>{e.setAttribute("tabindex",0)})}function showOverlay(){OVERLAY.classList.remove("__hidden__"),setTimeout(()=>{OVERLAY.classList.remove("__transparent__")},1),document.body.style.overflow="hidden",[...document.getElementsByTagName("img")].forEach(e=>{e.removeAttribute("tabindex")})}function createOverlay(){OVERLAY.classList.add("_lightbox_gallery_overlay_"),OVERLAY.innerHTML='<div class="_img_wrap_"><img src="" alt=""><button type="button" id="_lightbox_gallery_overlay__left">&#129136;</button><button type="button" id="_lightbox_gallery_overlay__right">&#129138;</button></div><button type="button" id="_lightbox_gallery_overlay__close_">&#10006;</button>',document.body.appendChild(OVERLAY),OVERLAY.classList.add("__hidden__"),OVERLAY.classList.add("__transparent__")}LIGHTBOXES.forEach(e=>{let t=[...e.getElementsByTagName("img")];t.forEach((e,t)=>{e.setAttribute("tabindex",0),e.addEventListener("click",a=>{currentImage=t,OVERLAY.getElementsByTagName("img")[0].src=e.src,showOverlay()})}),nextImage=()=>{++currentImage===t.length&&(currentImage=0),OVERLAY.getElementsByTagName("img")[0].src=t[currentImage].src},prevImage=()=>{--currentImage<0&&(currentImage=t.length-1),OVERLAY.getElementsByTagName("img")[0].src=t[currentImage].src}}),NEXT_BTN.addEventListener("click",nextImage),PREV_BTN.addEventListener("click",prevImage),CLOSE_BTN.addEventListener("click",()=>{hideOverlay()}),window.addEventListener("keydown",e=>{"Escape"!==e.key||OVERLAY.classList.contains("__hidden__")||hideOverlay(),"ArrowLeft"!==e.key||OVERLAY.classList.contains("__hidden__")||prevImage(),"ArrowRight"!==e.key||OVERLAY.classList.contains("__hidden__")||nextImage(),"Enter"===e.key&&e.target.click(),console.log(e)});